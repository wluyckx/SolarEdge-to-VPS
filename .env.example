# ============================================================
# Sungrow-to-VPS — Environment Variables
# ============================================================
# Copy this file to .env and fill in the values.
#   cp .env.example .env
#
# Lines starting with # are comments.
# Required variables have no default and MUST be set.
# Optional variables show their default after the = sign.

# ------------------------------------------------------------
# Edge daemon (edge/src/config.py — EdgeSettings)
# ------------------------------------------------------------

# (Required) IP address or hostname of the Sungrow WiNet-S dongle on the LAN.
SUNGROW_HOST=192.168.1.100

# (Required) Base URL of the VPS ingestion API. Must use HTTPS (HC-003).
VPS_BASE_URL=https://your-domain.example.com

# (Required) Per-device bearer token for authenticating with the VPS API.
VPS_DEVICE_TOKEN=change-me-to-a-secure-token

# (Optional) Modbus TCP port on the WiNet-S dongle.
# SUNGROW_PORT=502

# (Optional) Modbus slave / unit ID.
# SUNGROW_SLAVE_ID=1

# (Optional) Seconds between Modbus poll cycles (minimum 5, HC-004).
# POLL_INTERVAL_S=5

# (Optional) Milliseconds between register group reads within a poll cycle.
# INTER_REGISTER_DELAY_MS=20

# (Optional) Device identifier sent with samples. Defaults to SUNGROW_HOST.
# DEVICE_ID=

# (Optional) Maximum samples per upload batch.
# BATCH_SIZE=30

# (Optional) Seconds between upload attempts.
# UPLOAD_INTERVAL_S=10

# (Optional) Path to the SQLite spool file for local buffering.
# SPOOL_PATH=/data/spool.db

# (Optional) Diagnostic mode: log raw register snapshots every N polls.
# RAW_DEBUG_ENABLED=false
# RAW_DEBUG_EVERY_N_POLLS=60

# ------------------------------------------------------------
# VPS API (vps/src/api/main.py)
# ------------------------------------------------------------

# (Required) PostgreSQL connection URL for async driver.
DATABASE_URL=postgresql+asyncpg://sungrow:change-me@localhost:5432/sungrow

# (Required) Redis connection URL.
REDIS_URL=redis://localhost:6379/0

# (Required) Comma-separated token:device_id pairs for device authentication.
# Example: "tok1:device-a,tok2:device-b"
DEVICE_TOKENS=change-me-token:my-device-id

# (Optional) Cache TTL in seconds for realtime/series endpoints.
# CACHE_TTL_S=5

# (Optional) Maximum number of samples accepted per ingest request.
# MAX_SAMPLES_PER_REQUEST=1000

# (Optional) Maximum request body size in bytes.
# MAX_REQUEST_BYTES=1048576

# ------------------------------------------------------------
# Database (docker-compose.yml — postgres service)
# ------------------------------------------------------------

# (Required) Password for the PostgreSQL sungrow user.
POSTGRES_PASSWORD=change-me-to-a-secure-password
